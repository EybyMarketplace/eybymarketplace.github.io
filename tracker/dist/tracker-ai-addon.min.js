/* Influencer Tracker v2.1.0 with AI | Built: 2025-09-01T19:49:09.994Z */
!function(e,t){"use strict";void 0!==e&&(e.InfluencerTrackerBuild={name:"ai-only",version:"2.1.0",timestamp:"2025-09-01T19:49:10.940Z",files:["src/ai/ai-data-collector.js"],features:{tracking:!0,attribution:!0,adapters:!0,ai:!0}}),function(e,t){const i={sessionStart:Date.now(),behaviorMetrics:{pageViews:0,productViews:0,cartActions:0,totalClicks:0,scrollDepth:[],timeOnPages:[]},analyzeBehavior:function(){const e=Date.now()-this.sessionStart,t=this.behaviorMetrics;return{behavioral_segment:this.getBehavioralSegment(t,e),conversion_probability:this.getConversionProbability(t,e),engagement_quality:this.getEngagementQuality(t,e),device_tier:this.getDeviceTier(),attribution_confidence:this.getAttributionConfidence()}},getBehavioralSegment:function(e,t){return e.cartActions>0&&t<3e5?"decisive_buyer":e.cartActions>2?"hesitant_buyer":e.productViews>5&&0===e.cartActions?"researcher":e.totalClicks>10?"price_conscious":"casual_browser"},getConversionProbability:function(e,t){let i=0;return e.cartActions>0&&(i+=40),e.productViews>3&&(i+=20),t>18e4&&(i+=20),e.totalClicks>5&&(i+=10),e.pageViews>5&&(i+=10),i>=70?"high":i>=40?"medium":"low"},getEngagementQuality:function(e,t){const i=e.scrollDepth.length>0?e.scrollDepth.reduce((e,t)=>e+t,0)/e.scrollDepth.length:0;let r=0;return r+=5*e.pageViews,r+=t/1e3*.1,r+=2*e.totalClicks,r+=.5*i,r>=100?"high":r>=50?"medium":"low"},getDeviceTier:function(){const t=navigator.deviceMemory||4,i=navigator.hardwareConcurrency||4,r=e.screen,n=r.width*r.height;return t>=8&&i>=8&&n>2073600?"premium":t>=4&&n>921600?"mid_range":"budget"},getAttributionConfidence:function(){let i=.3;const r=new URLSearchParams(e.location.search);return(r.get("affiliate")||r.get("ref"))&&(i+=.4),r.get("utm_source")&&(i+=.2),t.referrer&&["instagram.com","tiktok.com","youtube.com","facebook.com"].some(e=>t.referrer.includes(e))&&(i+=.1),Math.min(i,1)},updateMetrics:function(e,t){switch(e){case"page_view":this.behaviorMetrics.pageViews++;break;case"product_view":this.behaviorMetrics.productViews++;break;case"add_to_cart":case"remove_from_cart":this.behaviorMetrics.cartActions++;break;case"click":this.behaviorMetrics.totalClicks++;break;case"scroll":t&&t.scroll_percent&&this.behaviorMetrics.scrollDepth.push(t.scroll_percent)}},sendAnalysis:function(){const t=this.analyzeBehavior();e.InfluencerTracker&&e.InfluencerTracker.track("ai_session_analysis",{session_analysis:t,session_duration:Date.now()-this.sessionStart,total_events:Object.values(this.behaviorMetrics).reduce((e,t)=>Array.isArray(t)?e+t.length:e+t,0)})}};if(e.InfluencerTracker){const t=e.InfluencerTracker.track;e.InfluencerTracker.track=function(e,r={}){i.updateMetrics(e,r),t.call(this,e,r)},e.InfluencerTracker.getAIAnalysis=function(){return i.analyzeBehavior()}}setInterval(()=>{i.sendAnalysis()},3e5),e.addEventListener("beforeunload",()=>{i.sendAnalysis()}),e.AISessionAnalyzer=i,console.log("ðŸ¤– AI Session Analyzer integrated with existing customer_sessions")}(e,t)}("undefined"!=typeof window?window:this,"undefined"!=typeof document?document:{});